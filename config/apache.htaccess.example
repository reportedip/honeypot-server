RewriteEngine On

# Route everything to public/index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ public/index.php [QSA,L]

# Also route direct requests to index.php
RewriteRule ^public/index\.php$ - [L]
RewriteRule ^(.*)$ public/index.php [QSA,L]

# Block access to sensitive directories
RedirectMatch 403 ^/src(/.*)?$
RedirectMatch 403 ^/config(/.*)?$
RedirectMatch 403 ^/data(/.*)?$
RedirectMatch 403 ^/tests(/.*)?$
RedirectMatch 403 ^/docker(/.*)?$

# Prevent directory listing
Options -Indexes

# Disable server signature
ServerSignature Off
